"use strict";(self.webpackChunke_motor_solution_doc=self.webpackChunke_motor_solution_doc||[]).push([[3018],{5761:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"docs/script","title":"Script","description":"The Script Checkpoint and the Script Tab offer a flexible coding environment designed for Python. This environment empowers users to take full control of their program by enabling them to:","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/script.md","sourceDirName":"docs","slug":"/docs/script","permalink":"/eMotorSolutionDoc/en/docs/docs/script","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Script"},"sidebar":"docsSidebar","previous":{"title":"Main Window","permalink":"/eMotorSolutionDoc/en/docs/docs/main_window"},"next":{"title":"Machine","permalink":"/eMotorSolutionDoc/en/docs/category/machine"}}');var i=t(4848),s=t(8453);const o={sidebar_position:3,title:"Script"},a="Script Checkpoint",c={},l=[{value:"<code>ems</code> module",id:"ems-module",level:2},{value:"Adding a new parameter",id:"adding-a-new-parameter",level:2},{value:"Removing a parameter",id:"removing-a-parameter",level:2},{value:"Print and Pretty Print",id:"print-and-pretty-print",level:2},{value:"Stopping heavy calculations",id:"stopping-heavy-calculations",level:2}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"script-checkpoint",children:"Script Checkpoint"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Script Checkpoint"})," and the ",(0,i.jsx)(n.strong,{children:"Script Tab"})," offer a flexible coding environment designed for Python. This environment empowers users to take full control of their program by enabling them to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Define and modify parameters dynamically."}),"\n",(0,i.jsx)(n.li,{children:"Perform calculations and run custom analyses."}),"\n",(0,i.jsx)(n.li,{children:"Post-process results to extract meaningful insights."}),"\n",(0,i.jsx)(n.li,{children:"Leverage a wide range of Python packages that provide optimization capabilities and other powerful tools to enhance productivity and achieve advanced functionalities."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This feature is ideal for users who need a customizable and interactive workspace to tailor their workflows and achieve specific objectives."}),"\n",(0,i.jsxs)(n.p,{children:["Python scripts are located in the ",(0,i.jsx)(n.code,{children:"project_dir/scripts/"})," directory. To choose which script appears in the Script tab, enter the desired file name in the ",(0,i.jsx)(n.code,{children:"Script Path"})," field of the Property Editor panel. If you do not specify a file, ",(0,i.jsx)(n.code,{children:"main.py"})," will be used as the default entry point."]}),"\n",(0,i.jsxs)(n.h2,{id:"ems-module",children:[(0,i.jsx)(n.code,{children:"ems"})," module"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ems"})," module is automatically imported in the script environment. This module provides a set of functions and classes that allow you to interact with the project environment, manage parameters, and perform various operations."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.get_cwd() -> str"}),": Returns the current working directory of the project."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.get_parameters() -> dict"}),": Returns a dictionary of all parameters defined in the project environment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.update_parameters(params: dict)"}),": Updates the project parameters with the provided dictionary. This function allows you to add or modify parameters dynamically."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.pop_parameter(name: str)"}),": Removes the specified parameter from the project environment. This function is useful for cleaning up or removing parameters that are no longer needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.validate() -> dict"}),": Validates all the checkpoints and milestones in the project. It returns a dictionary containing the validation results, including any errors or warnings encountered during the validation process."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.update()"}),": Updates the project environment by re-evaluating all parameters and dependencies. This function ensures that the project is in sync with any changes made to the parameters or other components."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.generate_mesh(stator_path:str, rotor_path:str, silent:bool=False)"}),": Generates the mesh for the specified stator and rotor paths. The ",(0,i.jsx)(n.code,{children:"silent"})," parameter controls whether to suppress output messages during the mesh generation process."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.get_analysis(name:str) -> dict"}),": Retrieves the analysis settings for the specified analysis name. This function returns a dictionary containing the input control parameters and other relevant information for the analysis."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.update_analysis(name:str, input_control:dict)"}),": Updates the specified analysis with the provided input control dictionary. This function allows you to modify the parameters and settings of a specific analysis dynamically."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.run_analysis(name:str)"}),": Runs the specified analysis. This function executes the analysis with the current settings and parameters defined in the project environment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.stop()"}),": Stops the current calculation. This function is useful for interrupting long-running calculations or processes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ems.stop_requested() -> bool"}),": Checks if a stop request has been made. This function returns ",(0,i.jsx)(n.code,{children:"True"})," if a stop request is pending, allowing you to implement mechanisms for gracefully stopping calculations."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"adding-a-new-parameter",children:"Adding a new parameter"}),"\n",(0,i.jsx)(n.p,{children:"There are two ways to add a new parameter to the project environment:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Using the Script Tab"}),":",(0,i.jsx)(n.br,{}),"\n","Add the parameter programmatically in the script by using the following code snippet:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import ems\r\npar = 10\r\nems.update_parameters({"par": par})\n'})}),"\n",(0,i.jsx)(n.p,{children:"This approach allows you to define and update parameters dynamically within your Python script."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Using the Property Editor Panel"}),":",(0,i.jsx)(n.br,{}),"\n","Click on the ",(0,i.jsx)("span",{style:{fontFamily:"Segoe Fluent Icons",fontSize:"1.0em"},children:"\uf8aa"})," button inside the Property Editor panel to add a new parameter interactively. This will open a pop-up window where you can enter the parameter name and value. The corresponding code snippet will be automatically generated in the script tab."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"removing-a-parameter",children:"Removing a parameter"}),"\n",(0,i.jsxs)(n.p,{children:["To remove a parameter, you can either delete it from the Property Editor panel by clicking on the ",(0,i.jsx)("span",{style:{fontFamily:"Segoe Fluent Icons",fontSize:"1.0em"},children:"\ue74d"})," button and choosing the parameter you want to remove, or you can use the following code snippet in the script tab:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'ems.pop_parameter("par")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"print-and-pretty-print",children:"Print and Pretty Print"}),"\n",(0,i.jsxs)(n.p,{children:["To print a message in the log panel, you can use the ",(0,i.jsx)(n.code,{children:"print"})," function. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'print("Hello World")\n'})}),"\n",(0,i.jsx)(n.p,{children:"This will display the message in the log panel."}),"\n",(0,i.jsxs)(n.p,{children:["To pretty print a dictionary, you can use the ",(0,i.jsx)(n.code,{children:"pprint"})," function from the ",(0,i.jsx)(n.code,{children:"pprint"})," module. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'pprint({"key": "value"})\n'})}),"\n",(0,i.jsx)(n.p,{children:"This will format the dictionary in a more readable way, making it easier to understand the structure and contents of the data."}),"\n",(0,i.jsx)(n.h2,{id:"stopping-heavy-calculations",children:"Stopping heavy calculations"}),"\n",(0,i.jsxs)(n.p,{children:["To stop heavy calculations, you can use the ",(0,i.jsx)(n.code,{children:"ems.stop()"})," and ",(0,i.jsx)(n.code,{children:"ems.stop_requested()"})," functions. The ",(0,i.jsx)(n.code,{children:"ems.stop()"})," function will stop the current calculation, while the ",(0,i.jsx)(n.code,{children:"ems.stop_requested()"})," function can be used to check if a stop request has been made. You can use these functions to implement a mechanism for stopping long-running calculations gracefully."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import ems\r\nfrom time import sleep\r\nfor i in range(5):\r\n    par += 1\r\n    ems.update_parameters({"par": par})\r\n    print(f"par = {par}")\r\n    if ems.stop_requested():\r\n        print("stop requested")\r\n        ems.stop()\r\n    sleep(1) # heavy computation\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);