"use strict";(self.webpackChunke_motor_solution_doc=self.webpackChunke_motor_solution_doc||[]).push([[7126],{3333:(n,e,t)=>{t.d(e,{A:()=>i});const i=t.p+"assets/images/user_def_spm_dim-d669f3b7c7997bdb1157e3bb7ba94ac1.png"},3800:(n,e,t)=>{t.d(e,{A:()=>i});const i=t.p+"assets/images/user_def_spm_properties-8a1a9ce9284c2933bb4386ceff98eae0.png"},7946:(n,e,t)=>{t.d(e,{A:()=>i});const i=t.p+"assets/images/user_def_spm_points-f6fc84bf429696d6c3909277a5987365.png"},8213:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"docs/Extras/user_defined_spm","title":"User Defined SPM","description":"The surface permanent magnet machines may have multiple slots with multiple permanent magnets in each slot. Each permanent magnet can also have its own magnetization direction.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/Extras/user_defined_spm.md","sourceDirName":"docs/Extras","slug":"/docs/Extras/user_defined_spm","permalink":"/eMotorSolutionDoc/en/docs/docs/Extras/user_defined_spm","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"User Defined SPM"},"sidebar":"docsSidebar","previous":{"title":"User Defined IPM","permalink":"/eMotorSolutionDoc/en/docs/docs/Extras/user_defined_ipm"},"next":{"title":"User Defined SynRM","permalink":"/eMotorSolutionDoc/en/docs/docs/Extras/user_defined_synrm"}}');var o=t(4848),r=t(8453);const s={sidebar_position:4,title:"User Defined SPM"},a="User Defined Surface Permanent Magnet (SPM)",c={},d=[{value:"Points",id:"points",level:2},{value:"Connections",id:"connections",level:2},{value:"Magnetization",id:"magnetization",level:2},{value:"Example",id:"example",level:2}];function l(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"user-defined-surface-permanent-magnet-spm",children:"User Defined Surface Permanent Magnet (SPM)"})}),"\n",(0,o.jsxs)(e.p,{children:["The surface permanent magnet machines may have multiple slots with multiple permanent magnets in each slot. Each permanent magnet can also have its own magnetization direction.\r\nThe user-defined Slot-Magnet, takes three parameters: ",(0,o.jsx)(e.code,{children:"Points"}),", ",(0,o.jsx)(e.code,{children:"Connections"}),", and ",(0,o.jsx)(e.code,{children:"Magnetization"}),"."]}),"\n",(0,o.jsx)("p",{class:"ems",children:(0,o.jsx)(e.img,{alt:"add",src:t(3800).A+"",width:"478",height:"173"})}),"\n",(0,o.jsxs)(e.p,{children:["By default, a ",(0,o.jsx)(e.code,{children:"SlotM11"})," is created when a user-defined SPM is selected. By clicking on the ",(0,o.jsx)("span",{style:{fontFamily:"Segoe Fluent Icons",fontSize:"1.0em"},children:"\ue70f"})," ",(0,o.jsx)(e.strong,{children:"Edit"})," button, a dialog will open where you can edit the ",(0,o.jsx)(e.code,{children:"Points"}),", ",(0,o.jsx)(e.code,{children:"Connections"}),", and ",(0,o.jsx)(e.code,{children:"Magnetization"})," interactively."]}),"\n",(0,o.jsx)("p",{class:"ems",children:(0,o.jsx)(e.img,{alt:"add",src:t(8423).A+"",width:"1055",height:"756"})}),"\n",(0,o.jsx)(e.h2,{id:"points",children:"Points"}),"\n",(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"Points"})," dictionary contains the coordinates of the points that define the slots and magnets and the index of center-line points. The template for the ",(0,o.jsx)(e.code,{children:"Points"})," dictionary is as follows:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'{\r\n    "points": {\r\n        "point0": [point0_x_coordinate, point0_y_coordinate],\r\n        "point1": [point1_x_coordinate, point1_y_coordinate],\r\n        ...\r\n    },\r\n    "pole_top_index": "point_x",\r\n    "pole_bottom_index": "point_y",\r\n    "core_radius_index": "point_z",\r\n}\n'})}),"\n",(0,o.jsxs)(e.admonition,{type:"warning",children:[(0,o.jsx)(e.p,{children:"The following remarks should be strictly followed:"}),(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"The slot should be aligned with the x-axis."}),"\n",(0,o.jsx)(e.li,{children:"Point coordinates should be given in meters."}),"\n",(0,o.jsxs)(e.li,{children:["The keys in the ",(0,o.jsx)(e.code,{children:"points"})," dictionary should be unique strings that represent the point names. Other keys like integer or float values are not allowed."]}),"\n"]})]}),"\n",(0,o.jsx)(e.h2,{id:"connections",children:"Connections"}),"\n",(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"Connections"})," dictionary defines how the points in the ",(0,o.jsx)(e.code,{children:"Points"})," dictionary are connected to form the slot and magnet geometries. SPM usually have a single slot-magnet combination, but for more complex designs, it can have multiple slots and magnets. The template for the ",(0,o.jsx)(e.code,{children:"Connections"})," dictionary is as follows:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'{\r\n    "slots": [\r\n        [   # First slot\r\n            ["connection_type", "parameter1", "parameter2", ...],\r\n            ["connection_type", "parameter1", "parameter2", ...], \r\n        ],\r\n        [   # Second slot\r\n            ["connection_type", "parameter1", "parameter2", ...],\r\n            ["connection_type", "parameter1", "parameter2", ...], \r\n        ],\r\n    ],\r\n    "magnets": [\r\n        [   # First magnet\r\n            ["connection_type", "parameter1", "parameter2", ...],\r\n            ["connection_type", "parameter1", "parameter2", ...], \r\n        ],\r\n        [   # Second magnet\r\n            ["connection_type", "parameter1", "parameter2", ...],\r\n            ["connection_type", "parameter1", "parameter2", ...], \r\n        ],\r\n    ]\r\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"The connections should close the geometry of the slot and windings. And the sequence of the connections should be in counter-clockwise direction."}),"\n",(0,o.jsxs)(e.admonition,{type:"info",children:[(0,o.jsx)(e.p,{children:"Currently, the following connection types are supported:"}),(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"line"}),": Connects two points with a straight line.","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.em,{children:"Syntax"}),": ",(0,o.jsx)(e.code,{children:'("line", "point1", "point2")'})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"arc"}),": Connects two points with an arc.","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.em,{children:"Syntax"}),": ",(0,o.jsx)(e.code,{children:'("arc", "start_point", "center_point", "end_point")'})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"arc3p"}),": Connects two points with an arc defined by three points.","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.em,{children:"Syntax"}),": ",(0,o.jsx)(e.code,{children:'("arc3p", "start_point", "middle_point", "end_point")'})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"fillet"}),": Connects two lines with a fillet.","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.em,{children:"Syntax"}),": ",(0,o.jsx)(e.code,{children:'("fillet", "point1", "intersection_point", "point2", radius)'})]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,o.jsx)(e.h2,{id:"magnetization",children:"Magnetization"}),"\n",(0,o.jsxs)(e.p,{children:["In contrast to ",(0,o.jsx)(e.code,{children:"points"})," and ",(0,o.jsx)(e.code,{children:"connections"}),", the ",(0,o.jsx)(e.code,{children:"magnetization"})," is a list of dictionaries, where each dictionary defines the magnetization direction for the magnets defined in ",(0,o.jsx)(e.code,{children:"connections"}),". Each magnet can have its own magnetization type, ",(0,o.jsx)(e.code,{children:"cartesian"})," or ",(0,o.jsx)(e.code,{children:"polar"}),". In case of ",(0,o.jsx)(e.code,{children:"cartesian"}),", the magnetization is defined by a starting and ending point, while in case of ",(0,o.jsx)(e.code,{children:"polar"}),", the magnetization is defined by the ",(0,o.jsx)(e.code,{children:"polar_center_point"}),"."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'[\r\n    {\r\n        "coordination": "cartesian",\r\n        "starting_point": "point_x",\r\n        "ending_point": "point_y",\r\n    },\r\n    {\r\n        "coordination": "polar",\r\n        "polar_center_point": [x_coordinate, y_coordinate],\r\n    },\r\n]\n'})}),"\n",(0,o.jsx)(e.h2,{id:"example",children:"Example"}),"\n",(0,o.jsxs)(e.p,{children:["It is recommanded to define the points and connections in ",(0,o.jsx)(e.a,{href:"https://emsolution-ssil.github.io/eMotorSolutionDoc/docs/docs/script",children:"Script"})," checkpoint, since it gives more flexibility and allows to use python functions."]}),"\n",(0,o.jsx)(e.p,{children:"In this example, we will create a user-defined IPM with two holes and two magnets, where both magnets have the same magnetization direction in x-direction."}),"\n",(0,o.jsx)("p",{class:"ems",children:(0,o.jsx)(e.img,{alt:"add",src:t(3333).A+"",width:"936",height:"1059"})}),"\n",(0,o.jsx)(e.p,{children:"The points and connections are defined as follows:"}),"\n",(0,o.jsx)("p",{class:"ems",children:(0,o.jsx)(e.img,{alt:"add",src:t(7946).A+"",width:"936",height:"1028"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'import ems\r\nimport numpy as np\r\n\r\nstator_inner_radius = 80.2e-3  # m\r\nn_poles = 8\r\n\r\nh0 = 10e-3  # m\r\nw0 = 40e-3  # m\r\nh1 = 2e-3  # m\r\nh2 = 5e-3  # m\r\n\r\npole_pitch = 2 * np.pi / n_poles\r\n\r\npa_x = stator_inner_radius * np.cos(pole_pitch / 2)\r\npa_y = stator_inner_radius * np.sin(pole_pitch / 2)\r\n\r\npb_x = stator_inner_radius - h0\r\npb_y = pb_x * np.tan(pole_pitch / 2)\r\n\r\npc_x = pb_x\r\npc_y =  w0 / 2\r\n\r\npd_x = pc_x - h1\r\npd_y = pc_y\r\n\r\npe_x = pd_x\r\npe_y = 0\r\n\r\npf_x = pe_x + h1 + h2\r\npf_y = 0\r\n\r\npg_x = pf_x\r\npg_y = pc_y\r\npts = {\r\n    "points": {\r\n        "a_top": (pa_x, pa_y),\r\n        "b_top": (pb_x, pb_y),\r\n        "c_top": (pc_x, pc_y),\r\n        "d_top": (pd_x, pd_y),\r\n        "e": (pe_x, pe_y),\r\n        "f": (pf_x, pf_y),\r\n        "g_top": (pg_x, pg_y),\r\n        "a_bottom": (pa_x, -pa_y),\r\n        "b_bottom": (pb_x, -pb_y),\r\n        "c_bottom": (pc_x, -pc_y),\r\n        "d_bottom": (pd_x, -pd_y),\r\n        "g_bottom": (pg_x, -pg_y),\r\n        "center": (0, 0),\r\n    },\r\n    "pole_top_index": "f",\r\n    "pole_bottom_index": "e",\r\n    "core_radius_index": "e",\r\n}\r\n\r\ncns = {\r\n    "slots": [\r\n        [  \r\n            ("line", "a_top", "b_top"),\r\n            ("line", "b_top", "c_top"),\r\n            ("line", "c_top", "d_top"),\r\n            ("line", "d_top", "e"),\r\n            ("line", "e", "d_bottom"),\r\n            ("line", "d_bottom", "c_bottom"),\r\n            ("line", "c_bottom", "b_bottom"),\r\n            ("line", "b_bottom", "a_bottom"),\r\n            ("arc", "a_bottom", "center", "a_top"),\r\n        ]\r\n    ],\r\n    "magnets": [\r\n        [\r\n            ("line", "c_top", "d_top"),\r\n            ("line", "d_top", "e"),\r\n            ("line", "e", "d_bottom"),\r\n            ("line", "d_bottom", "c_bottom"),\r\n            ("line", "c_bottom", "g_bottom"),\r\n            ("line", "g_bottom", "f"),\r\n            ("line", "f", "g_top"),\r\n            ("line", "g_top", "c_top"),\r\n        ]\r\n    ]                  \r\n}\r\n\r\nmgs = [\r\n    {\r\n        "coordination": "cartesian",\r\n        "starting_point": "e",\r\n        "ending_point": "f",\r\n    },\r\n]  \r\n\r\nems.update_parameters(\r\n    {\r\n        "pts": pts,\r\n        "cns": cns,\r\n        "mgs": mgs,\r\n    }\r\n)\n'})}),"\n",(0,o.jsx)("a",{className:"button",target:"_blank",href:t(9379).A,download:!0,children:"Download The User Defined SPM Project"})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},8423:(n,e,t)=>{t.d(e,{A:()=>i});const i=t.p+"assets/images/user_def_spm_dialog-1efb25e9251266c9bfda288e08753377.png"},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>a});var i=t(6540);const o={},r=i.createContext(o);function s(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),i.createElement(r.Provider,{value:e},n.children)}},9379:(n,e,t)=>{t.d(e,{A:()=>i});const i=t.p+"assets/files/UserDefinedSPM-076ec2ec7a390c789b544c6a877472b3.zip"}}]);